"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[466],{8466:function(n,e,t){t.r(e),t.d(e,{default:function(){return Zn}});var r,a,i,s,o,c,u,l,d,x,m,h,p,f=t(5861),g=t(9439),b=t(4687),j=t.n(b),v=t(2791),w=t(2203),Z=t(2337),C=t(5705),_=t(6727),y=t(4500),P=t(168),k=t(7691),N=t(8366),z=(0,k.ZP)(N.A)(r||(r=(0,P.Z)(["\n  margin: 30px auto 0;\n"]))),F=t(707),S="ContactForm_contact_form_input__XewXY",A="ContactForm_contact_form_group__ZrvK1",B="ContactForm_contact_form_inner_group__KxDHv",L="ContactForm_contact_form_label__2DlR4",$=t(3329),E="success",M="error",U=RegExp("^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$"),D=function(n){var e=n.initialValues,t=n.handleContactChange,r=(0,w.wY)().data,a=(0,_.Ry)({name:(0,_.Z_)().required().min(2,"Name must be at least 2 characters").matches(U,"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan").test("Name was entered successfully","This name is already taken",(function(n){return e?!o(n):!i(n)})),number:(0,_.Z_)().required().matches(/^\+?\d{1,4}[-.\s]?\d{1,3}[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/,"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +").min(6,"Number must be at least 6 characters").test("Number was entered successfully","This number is already taken",(function(n){return e?!c(n):!s(n)}))}),i=function(n){return null===r||void 0===r?void 0:r.find((function(e){return e.name===n}))},s=function(n){return null===r||void 0===r?void 0:r.find((function(e){var t=e.number;return n===t}))},o=function(n){return null===r||void 0===r?void 0:r.find((function(t){return n===t.name&&t.id!==e.id}))},c=function(n){return null===r||void 0===r?void 0:r.find((function(t){return n===t.number&&t.id!==e.id}))};return(0,$.jsx)(C.J9,{initialValues:null!==e&&void 0!==e?e:{name:"",number:""},validationSchema:a,onSubmit:function(n){t(n)},children:function(n){var e=n.values,t=n.errors,r=n.touched,a=n.handleChange,i=n.handleBlur;return(0,$.jsxs)(C.l0,{children:[(0,$.jsxs)("label",{className:A,children:[(0,$.jsxs)("span",{className:B,children:[(0,$.jsx)("span",{className:L,children:"Name"}),(0,$.jsx)(y.o,{className:S,type:"text",name:"name",onChange:a,onBlur:i,value:e.name})]}),!r.name&&(0,$.jsx)(F.P,{children:"Enter a name"}),r.name&&!t.name&&(0,$.jsx)(F.P,{status:E,children:"Name was entered successfully"}),r.name&&t.name&&(0,$.jsx)(F.P,{status:M,children:t.name})]}),(0,$.jsxs)("label",{className:A,children:[(0,$.jsxs)("span",{className:B,children:[(0,$.jsx)("span",{className:L,children:"Number"}),(0,$.jsx)(y.o,{className:S,type:"tel",name:"number",onChange:a,onBlur:i,value:e.number})]}),!r.number&&(0,$.jsx)(F.P,{children:"Enter a number"}),r.number&&!t.number&&(0,$.jsx)(F.P,{status:E,children:"Number was entered successfully"}),r.number&&t.number&&(0,$.jsx)(F.P,{status:M,children:t.number})]}),(0,$.jsx)(z,{text:"Confirm",type:"submit"})]})}})},T=t(1413),W=t(3433),Y=t(7762),q=t(5048),O=t(7623),R=k.ZP.ul(a||(a=(0,P.Z)(["\n  flex-basis: 70%;\n  padding: 11px 20px 0;\n  display: flex;\n  flex-direction: column;\n  gap: 22px;\n  border: 3px solid rgba(154, 154, 154, 0.09);\n  border-top: 0;\n"]))),V=k.ZP.li(i||(i=(0,P.Z)(["\n  position: relative;\n  border-radius: 10px;\n  border: 0.5px solid rgba(137, 137, 137, 0.43);\n  cursor: pointer;\n\n  ","\n"])),(function(n){var e=n.generateLetter;if(e)return"\n        margin-top: 20px;\n\n        &::before {\n          content: '".concat(e,"';\n          position: absolute;\n          top: -35px;\n              padding: 3px 0px 3px 25px;\n    font-size: 18px;\n    right: -21px;\n    font-weight: 500;\n          left: -21px;\n          background-color: aqua;\n        }\n\n        &:first-child{\n          margin-top: 22.6px;\n        }\n      ")})),G=k.ZP.div(s||(s=(0,P.Z)(["\n  flex-basis: 70%;\n  padding: 11px 20px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 3px solid rgba(154, 154, 154, 0.09);\n  border-top: 0;\n"]))),J=k.ZP.div(o||(o=(0,P.Z)(["\n  padding: 6px 19px 6px 9px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 20px;\n"]))),K=k.ZP.p(c||(c=(0,P.Z)(["\n  width: 100%;\n  max-width: 200px;\n  word-break: break-all;\n"]))),X=t(8673),H=function(n){var e=n.name,t=n.number;return(0,$.jsxs)(J,{children:[(0,$.jsx)("span",{children:(0,$.jsx)("img",{src:X,alt:"Contact avatar"})}),(0,$.jsx)(K,{children:e}),(0,$.jsx)(K,{children:t})]})},Q=t(1526),I=function(n){var e=n.chooseContact,t=(0,w.wY)(void 0,{refetchOnMountOrArgChange:!0}),r=t.data,a=t.isFetching,i=(0,q.v9)(O.xN),s=(0,q.v9)(O.Zi),o=function(n){var e=[];if(!n)return null;var t,r=(0,Y.Z)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value.name.toUpperCase()[0];e.includes(a)||e.push(a)}}catch(i){r.e(i)}finally{r.f()}return e.map((function(n){return{letter:n,isUsed:!1}}))}(r),c=function(n){if("ascending"!==i&&"descending"!==i)return null;var e=n.name.toUpperCase()[0],t=o.find((function(n){return n.letter===e}));return t.isUsed?null:(t.isUsed=!0,e)},u=r&&function(n){var e=(0,W.Z)(n);switch(i){case"without":default:break;case"ascending":e.sort((function(n,e){return n.name.localeCompare(e.name)}));break;case"descending":e.sort((function(n,e){return e.name.localeCompare(n.name)}))}return e.filter((function(n){return n.name.toLowerCase().includes(s)}))}(r);return(0,$.jsx)($.Fragment,{children:null!==u&&void 0!==u&&u.length?(0,$.jsx)(R,{children:u.map((function(n){return(0,$.jsx)(V,{generateLetter:c(n),onClick:function(){return e(n)},children:(0,$.jsx)(H,(0,T.Z)({},n))},n.id)}))}):!a&&(0,$.jsx)(G,{children:(0,$.jsx)(Q.v,{text:"There are no contacts here"})})})},nn=t(1133),en=t(6154),tn=t(2898),rn=t(4398),an=k.ZP.div(u||(u=(0,P.Z)(["\n  display: flex;\n  min-height: 700px;\n"]))),sn=t(6856),on=t(3853),cn=t(2931),un=t(2491),ln=t(9869),dn=k.ZP.div(l||(l=(0,P.Z)(["\n  flex-grow: 1;\n  border-right: 3px solid rgba(154, 154, 154, 0.09);\n  border-bottom: 3px solid rgba(154, 154, 154, 0.09);\n"]))),xn=k.ZP.div(d||(d=(0,P.Z)(["\n  position: relative;\n  width: 280px;\n  margin: 0 auto;\n"]))),mn=k.ZP.div(x||(x=(0,P.Z)(["\n  position: fixed;\n  top: 20%;\n  width: 280px;\n"]))),hn=k.ZP.div(m||(m=(0,P.Z)(["\n  padding: 70px 0 30px 0;\n  text-align: center;\n"]))),pn=k.ZP.div(h||(h=(0,P.Z)(["\n  width: 100px;\n  margin: 0 auto 5px;\n"]))),fn=(0,k.ZP)(ln.Z)(p||(p=(0,P.Z)(["\n  &.MuiButtonBase-root {\n    display: flex;\n    gap: 10px;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n"]))),gn=function(n){var e=n.data,t=e.name,r=e.number,a=e.id,i=n.chooseContact,s=(0,v.useState)(!1),o=(0,g.Z)(s,2),c=o[0],u=o[1],l=(0,v.useState)(!1),d=(0,g.Z)(l,2),x=d[0],m=d[1],h=(0,w.i)(),p=(0,g.Z)(h,2),b=p[0],C=p[1],_=(0,w.MG)(),y=(0,g.Z)(_,2),P=y[0],k=y[1],N=function(){u(!1),m(!1)},z=function(){var n=(0,f.Z)(j().mark((function n(){var e;return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(a);case 2:e=n.sent,!e.error?((0,Z.i)('Contact "'.concat(t,'" was successfully deleted')),i(null)):(0,Z.z)("Something went wrong with deleting this contact"),N();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),F=function(){var n=(0,f.Z)(j().mark((function n(e){var a;return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t!==e.name||r!==e.number){n.next=3;break}return N(),n.abrupt("return");case 3:return n.next=5,b(e);case 5:a=n.sent,!a.error?((0,Z.i)('Contact "'.concat(t,'" was successfully edited')),i(a.data)):(0,Z.z)("Something went wrong with editing this contact"),N();case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(dn,{children:(0,$.jsx)(xn,{children:(0,$.jsxs)(mn,{children:[(0,$.jsxs)(hn,{children:[(0,$.jsx)(pn,{children:(0,$.jsx)("img",{src:X,alt:"Contact avatar",width:100})}),(0,$.jsx)("h3",{children:t})]}),(0,$.jsx)(un.P,{name:t,number:r}),(0,$.jsxs)(fn,{fullWidth:!0,variant:"contained",onClick:function(){return m(!0)},children:["Edit",C.isLoading?(0,$.jsx)(rn.$,{size:19}):(0,$.jsx)(on.vPQ,{size:23})]}),(0,$.jsxs)(fn,{fullWidth:!0,variant:"contained",onClick:function(){return u(!0)},children:["Delete",k.isLoading?(0,$.jsx)(rn.$,{size:19}):(0,$.jsx)(sn.ZkW,{size:23})]})]})})}),x&&(0,$.jsx)(en.u,{onClose:N,children:(0,$.jsx)(D,{handleContactChange:F,initialValues:{name:t,id:a,number:r}})}),c&&(0,$.jsx)(cn.p,{agreeFunc:z,onClose:N,toDeleteName:t})]})},bn=function(){var n=(0,w.Tn)(),e=(0,g.Z)(n,1)[0],t=(0,w.wY)(),r=t.isLoading,a=t.isError,i=(0,v.useState)(null),s=(0,g.Z)(i,2),o=s[0],c=s[1],u=(0,v.useState)(!1),l=(0,g.Z)(u,2),d=l[0],x=l[1],m=function(){var n=(0,f.Z)(j().mark((function n(t){var r;return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(t);case 2:r=n.sent,!r.error?(0,Z.i)('New contact "'.concat(r.data.name,'" was successfully added')):(0,Z.z)("Something went wrong with adding this contact"),h();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),h=function(){x((function(n){return!n}))};return a?(0,$.jsx)(Q.v,{text:"Something went wrong, try to use it later"}):(0,$.jsxs)("div",{style:{flexGrow:1},children:[(0,$.jsx)(nn.B,{toggleModal:h}),d&&(0,$.jsx)(en.u,{onClose:h,children:(0,$.jsx)(D,{handleContactChange:m})}),r&&(0,$.jsx)(tn.u,{children:(0,$.jsx)(rn.$,{position:"center"})}),(0,$.jsxs)(an,{children:[(0,$.jsx)(I,{chooseContact:c}),o&&(0,$.jsx)(gn,{chooseContact:c,data:o})]})]})},jn=t(9576),vn=t(2084),wn=t(6113),Zn=function(){return(0,$.jsx)($.Fragment,{children:(0,$.jsx)(wn.$,{children:(0,$.jsx)(jn.W,{children:(0,$.jsxs)(wn.i,{children:[(0,$.jsx)(vn.O,{}),(0,$.jsx)(bn,{})]})})})})}}}]);
//# sourceMappingURL=466.279d7b7e.chunk.js.map